{% extends "student_base.html" %}

{% block title %}Attendance | Sootrank{% endblock %}
{% block nav_quick_links_active %} active{% endblock %}

{% block content %}

<h2 class="text-primary fw-bold text-center mb-3">Attendance Overview</h2>

<div class="card shadow-sm">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-primary">
          <tr>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Attended</th>
            <th>Total</th>
            <th style="min-width: 220px;">Attendance %</th>
          </tr>
        </thead>
        <tbody>
        {% for c in attendance_data %}
          {% with p=c.percent %}
          <tr>
            <td>{{ c.code }}</td>
            <td class="text-start">{{ c.course }}</td>
            <td>{{ c.attended }}</td>
            <td>{{ c.total }}</td>
            <td>
              <div class="progress" style="height:18px; border-radius:10px; overflow:hidden;">
                <div
                  class="progress-bar {% if p < 80 %}bg-danger{% else %}bg-success{% endif %}"
                  role="progressbar"
                  style="width: {{ p }}%;"
                  aria-valuenow="{{ p|floatformat:0 }}"
                  aria-valuemin="0"
                  aria-valuemax="100">
                  {{ p|floatformat:0 }}%
                </div>
              </div>
            </td>
          </tr>
          {% endwith %}
        {% empty %}
          <tr><td colspan="5" class="text-muted">No courses found.</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}

{% block script %}{% endblock %}
