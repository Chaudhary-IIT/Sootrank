<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Course Pre-Registration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gray-100 flex items-start justify-center py-10">
    <div class="w-[1150px]">

        <!-- Header -->
        <div class="mb-5">
            <h1 class="text-3xl font-bold">Course Pre-Registration</h1>
            <p class="text-red-500 mt-1">Last day for course pre-registration is 15-08-2025</p>
        </div>

        <!-- Card -->
        <div class="bg-white rounded-2xl shadow">
            <form id="courseForm" class="p-6">

                <!-- Grid of slots -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">

                    <!-- Slot A -->
                    <div class="flex flex-col">
                        <label for="slot-A" class="font-medium mb-1">Slot-A</label>
                        <select id="slot-A" name="slot-A"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="CS101">Programming in C (CS101) - 4 credits</option>
                            <option value="MA201">Linear Algebra (MA201) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot B -->
                    <div class="flex flex-col">
                        <label for="slot-B" class="font-medium mb-1">Slot-B</label>
                        <select id="slot-B" name="slot-B"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot C -->
                    <div class="flex flex-col">
                        <label for="slot-C" class="font-medium mb-1">Slot-C</label>
                        <select id="slot-C" name="slot-C"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot D -->
                    <div class="flex flex-col">
                        <label for="slot-D" class="font-medium mb-1">Slot-D</label>
                        <select id="slot-D" name="slot-D"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot E -->
                    <div class="flex flex-col">
                        <label for="slot-E" class="font-medium mb-1">Slot-E</label>
                        <select id="slot-E" name="slot-E"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot F -->
                    <div class="flex flex-col">
                        <label for="slot-F" class="font-medium mb-1">Slot-F</label>
                        <select id="slot-F" name="slot-F"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot G -->
                    <div class="flex flex-col">
                        <label for="slot-G" class="font-medium mb-1">Slot-G</label>
                        <select id="slot-G" name="slot-G"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot H -->
                    <div class="flex flex-col">
                        <label for="slot-H" class="font-medium mb-1">Slot-H</label>
                        <select id="slot-H" name="slot-H"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                    <!-- Slot FS -->
                    <div class="flex flex-col">
                        <label for="slot-FS" class="font-medium mb-1">Slot-FS</label>
                        <select id="slot-FS" name="slot-FS"
                            class="w-full bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2">
                            <option value="none">None</option>
                            <option value="EE202">Digital Systems (EE202) - 4 credits</option>
                            <option value="HS101">Economics (HS101) - 3 credits</option>
                        </select>
                    </div>

                </div>

                <!-- Credits and errors -->
                <div class="mt-6 flex items-center justify-between">
                    <p class=" text-lg font-semibold ">
                        Total Credits: <span id="totalCredits" class="text-green-600">0</span>
                    </p>
                    <p id="creditError" class="text-red-500 hidden"></p>
                </div>

                <!-- Divider -->
                <div class="h-px bg-gray-200 my-6"></div>

                <!-- Footer actions -->
                <div class="flex items-center justify-end gap-3">
                    <button type="button" id="resetBtn"
                        class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
                        Reset
                    </button>
                    <button type="submit" class="bg-gray-800 text-white px-5 py-2 rounded-lg hover:bg-black">
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="popup" class="fixed inset-0 hidden justify-center items-center bg-black/60 z-50">
        <div class="bg-white rounded-2xl shadow-lg w-[420px] p-6">
            <h2 class="text-xl font-bold mb-2">Confirm Submission</h2>
            <p class="text-red-500 mb-4">
                You will not be able to edit your course selection for this semester after this.
                Are you sure you'd like to proceed?
            </p>
            <div class="flex justify-between">
                <button id="backBtn" class="bg-gray-400 text-white px-4 py-2 rounded-lg hover:bg-gray-500">
                    Back
                </button>
                <button id="proceedBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                    Proceed
                </button>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script>
        const minCredit = 4;
        const maxCredit = 22;
        const courseCredits = {
            "CS101": 4,
            "MA201": 3,
            "EE202": 4,
            "HS101": 3
        };

        function updateCredits() {
            let total = 0;
            document.querySelectorAll("select").forEach((sel) => {
                if (sel.value !== "none") total += courseCredits[sel.value] || 0;
            });

            document.getElementById("totalCredits").textContent = total;
            const errorEl = document.getElementById("creditError");

            if (total < minCredit) {
                errorEl.textContent = `Minimum ${minCredit} credits required`;
                errorEl.classList.remove("hidden");
            } else if (total > maxCredit) {
                errorEl.textContent = `Maximum ${maxCredit} credits allowed`;
                errorEl.classList.remove("hidden");
            } else {
                errorEl.classList.add("hidden");
            }
        }

        // Attach change handler to all selects
        document.querySelectorAll("select").forEach((sel) => {
            sel.addEventListener("change", updateCredits);
        });

        // Reset button clears selections and recalculates
        document.getElementById("resetBtn").addEventListener("click", () => {
            document.querySelectorAll("select").forEach((sel) => (sel.value = "none"));
            updateCredits();
        });

        // Submit shows modal when credits valid
        document.getElementById("courseForm").addEventListener("submit", (e) => {
            e.preventDefault();
            const total = parseInt(document.getElementById("totalCredits").textContent, 10);
            if (total >= minCredit && total <= maxCredit) {
                const m = document.getElementById("popup");
                m.classList.remove("hidden");
                m.classList.add("flex");
            }
        });

        // Modal controls
        document.getElementById("backBtn").addEventListener("click", () => {
            document.getElementById("popup").classList.add("hidden");
        });

        document.getElementById("proceedBtn").addEventListener("click", () => {
            window.location.href = "/thanku";
        });

        // Initialize credits on load
        updateCredits();
    </script>
</body>

</html>