<!DOCTYPE html>
<html>
<head>
    <title>Results - Semester {{ semester }} for {{ student.first_name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<h2>Results for Semester {{ semester }} - {{ student.first_name }} {{ student.last_name }}</h2>
<p>Roll No: {{ student.roll_no }}</p>

<table class="table table-bordered w-75">
    <thead>
        <tr>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Credits</th>
            <th>Grade</th>
            <th>Grade Points</th>
            <th>Outcome</th>
        </tr>
    </thead>
    <tbody>
        {% for r in results %}
        <tr>
            <td>{{ r.course_code }}</td>
            <td>{{ r.course_name }}</td>
            <td>{{ r.credits }}</td>
            <td>
                {% if r.is_pass_fail %}
                    <span class="badge bg-info text-dark">Pass/Fail Mode</span>
                {% else %}
                    {{ r.grade|default:"—" }}
                {% endif %}
            </td>
            <td>
                {% if r.is_pass_fail %}
                    —
                {% else %}
                    {{ r.points }}
                {% endif %}
            </td>
            <td>
                {% if r.outcome == "PAS" %}
                    <span class="badge bg-success">Pass</span>
                {% elif r.outcome == "FAI" %}
                    <span class="badge bg-danger">Fail</span>
                {% elif r.outcome == "UNK" %}
                    <span class="badge bg-secondary">Unknown</span>
                {% else %}
                    {{ r.outcome }}
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6" class="text-center">No results found.</td></tr>
        {% endfor %}
    </tbody>
</table>

<h4>Semester Metrics</h4>
<ul>
    <li>Registered Credits (RCR): {{ metrics.RCR }}</li>
    <li>Earned Credits (ECR): {{ metrics.ECR }}</li>
    <li>Total Grade Points (STCR): {{ metrics.STCR }}</li>
    <li><strong>SGPA:</strong> {{ metrics.SGPA|floatformat:2 }}</li>
</ul>

<a href="{% url 'student_result_semester_list' student.roll_no %}" class="btn btn-secondary">Back to Semesters</a>

</body>
</html>
