{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Faculty | Sootrank{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <style>
    :root{
      --nav-height:72px;
      --radius:12px;
      --border:#e8ecf2;
      --shadow-subtle:0 2px 8px rgba(0,0,0,.06);
      --shadow-hover:0 10px 20px rgba(36,105,240,.14);
      --brand:#2469f0;
      --bg:#f6f7fb;
    }

    /* Layout & base */
    body{
      padding-top: var(--nav-height);
      background: var(--bg);
      font-size:15px;
    }

    /* Navbar (brand matches student base) */
    .navbar{
      height: var(--nav-height);
    }
    .navbar-brand span{
      color: var(--brand);
      font-weight:700;
      letter-spacing:.3px;
    }
    .nav-link.active,
    .nav-link:focus,
    .nav-link:hover{
      color: var(--brand) !important;
    }

    /* Dropdown open-on-hover animation (desktop only) */
    .navbar .dropdown-menu{
      display:block;                /* allow transition */
      visibility:hidden;
      opacity:0;
      transform: translateY(6px);
      transition: opacity .18s ease, transform .20s ease, visibility 0s linear .20s;
      position:absolute;
    }
    @media (min-width: 992px){
      .navbar .dropdown:hover > .dropdown-menu{
        visibility: visible;
        opacity: 1;
        transform: translateY(0);
        transition: opacity .18s ease, transform .20s ease;
      }
    }
    /* Click behavior (mobile / toggled) */
    .navbar .dropdown-menu.show{
      visibility: visible !important;
      opacity: 1 !important;
      transform: none !important;
      transition: none;
    }

    /* Clean dropdown link styling (no blue/underline) */
    .dropdown-menu .dropdown-item{
      text-decoration: none !important;
    }

    /* Cards: smooth hover glow */
    .card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-subtle);
      background:#fff;
      transition: box-shadow .25s ease, transform .2s ease;
    }
    .card:hover{
      box-shadow: var(--shadow-hover);
      transform: translateY(-1px);
    }

    /* Buttons: lift on hover */
    .btn{
      box-shadow: var(--shadow-subtle);
      transition: transform .2s ease, box-shadow .25s ease, filter .2s ease;
    }
    .btn:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      filter: brightness(1.02);
    }
    .btn:active{
      transform: translateY(0);
      box-shadow: var(--shadow-subtle);
    }

    /* Page container spacing */
    .container-page{
      padding-top: 12px;
      padding-bottom: 24px;
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- Fixed Top Navbar -->
  <nav class="navbar navbar-expand-lg bg-white border-bottom fixed-top">
    <div class="container-fluid">

      <!-- Spacer for balance (like student base) -->
      <div class="d-none d-lg-block" style="width:140px;"></div>

      <!-- Brand (Sootrank logo + name) -->
      <a class="navbar-brand d-flex align-items-center mx-lg-auto" href="{% url 'faculty_dashboard' %}">
        <img src="{% static 'images/sootrank_logo.jpg' %}" alt="Sootrank logo" width="36" height="36" class="me-2">
        <span>Sootrank</span>
      </a>

      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#facultyNavbar"
              aria-controls="facultyNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Collapsible -->
      <div class="collapse navbar-collapse" id="facultyNavbar">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

          <li class="nav-item">
            <a class="nav-link{% block nav_dashboard_active %}{% endblock %}" href="{% url 'faculty_dashboard' %}">
              <i class="fa-solid fa-house me-1"></i> Dashboard
            </a>
          </li>

          <!-- Courses -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle{% block nav_courses_active %}{% endblock %}" href="#" id="coursesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-book me-1"></i> Courses
            </a>
            <ul class="dropdown-menu" aria-labelledby="coursesDropdown">
              <li><a class="dropdown-item" href="{% url 'instructor_requests' %}"><i class="fa-solid fa-plus me-2"></i>Course Request</a></li>
              <li><a class="dropdown-item" href="{% url 'instructor_courses' %}"><i class="fa-solid fa-list me-2"></i>View Courses</a></li>
              <li><a class="dropdown-item" href="{% url 'view_schema_courses' %}"><i class="fa-solid fa-pen-to-square me-2"></i>Update Course's Schema</a></li>
            </ul>
          </li>

          <!-- Results -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle{% block nav_results_active %}{% endblock %}" href="#" id="resultsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-clipboard-list me-1"></i> Results
            </a>
            <ul class="dropdown-menu" aria-labelledby="resultsDropdown">
              <li><a class="dropdown-item" href="{% url 'faculty_marks_courses' faculty.id %}"><i class="fa-solid fa-keyboard me-2"></i> Enter Marks</a></li>
              <li><a class="dropdown-item" href="{% url 'grading_courses' faculty.id %}"><i class="fa-solid fa-calculator me-2"></i> Calculate Grades</a></li>
              <li><a class="dropdown-item" href="{% url 'faculty_view_courses_for_grades' faculty.id %}"><i class="fa-solid fa-file-lines me-2"></i> View Results</a></li>
            </ul>
          </li>



          <!-- Quick Links -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle{% block nav_quick_active %}{% endblock %}" href="#" id="quickDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-thumbtack me-1"></i> Quick Links
            </a>
            <ul class="dropdown-menu" aria-labelledby="quickDropdown">
              <li><a class="dropdown-item" href="https://academics.iitmandi.ac.in/calendar"><i class="fa-regular fa-calendar-days me-2"></i> Faculty Calendar</a></li>
              <li><a class="dropdown-item" href="{% url 'faculty_course_list' %}"><i class="fa-solid fa-table-list me-2"></i> Class Schedule</a></li>
              <li><a class="dropdown-item" href="{% url 'faculty_course_list' %}"><i class="fa-solid fa-user-check me-2"></i> Attendance</a></li>
              <li><a class="dropdown-item" href="#"><i class="fa-solid fa-chart-line me-2"></i> Reports & Analytics</a></li>
            </ul>
          </li>
        </ul>

        <!-- Right: Profile -->
        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto me-4">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="profileDropdown"
               role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="{% static 'images/sootrank_logo.jpg' %}" alt="Profile" width="28" height="28" class="rounded-circle me-2">
              <span class="fw-semibold">{{ faculty.first_name }} {{ faculty.last_name|default_if_none:"" }}</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
              <li><a class="dropdown-item" href="{% url 'faculty_profile' %}"><i class="fa-solid fa-id-badge me-2"></i> Profile</a></li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <form method="post" action="{% url 'logout' %}">
                  {% csrf_token %}
                  <button class="dropdown-item text-danger">
                    <i class="fa-solid fa-right-from-bracket me-2"></i> Logout
                  </button>
                </form>
              </li>
            </ul>
          </li>
        </ul>
      </div><!-- /.collapse -->
    </div>
  </nav>

  <!-- Messages -->
  <div class="container mt-3">
    {% if messages %}
      <div class="mb-3">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} mb-2" role="alert">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- Page content -->
  <div class="container container-page">
    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>
